# Setting up a Java Development Environment

I gathered all infirmation that is new for me from the following Pluralsight course: https://app.pluralsight.com/library/courses/setting-up-java-development-environment/table-of-contents

# Installing and running Java

- install the latest JDK from https://www.oracle.com/java/technologies/javase-downloads.html
- after installation, make sure you edit the System Environment Variables
```
JAVA_HOME: C:\Program Files\Java\jdk-14\
Path: ...; C:\Program Files\Java\jdk-14\bin\
```
- in order to verify that the `Path` has been correctly set use the followinng command line:
```bash
java --version
```
- access the documentation from https://docs.oracle.com/en/java/javase/index.html

## Compile and run code manually

- create the following Java class:
```java
class Hello {
	public static void main(String[] args) {
		System.out.println("Hello from Java!");
	}
}
```
- compile the class:
```bash
javac Hello.java
```
- run the compiled code:
```bash
java Hello
```

- check the output:
```
Hello from Java!
```

## Use an IntelliJ

- the recommended IDE for Java development is IntelliJ
- you can download the IntelliJ Community edition from https://www.jetbrains.com/idea/download/#section=windows

# Packaging Java Application

- Java applications are packaged into `JAR` files (Java Archive File)
- a `JAR` file is a `*.zip` file containing:
  - the platform independend code generated by the Java compiler (the classes) nested in a directory hierarchy that represents the `package` structure
  - optional meta-data stored inside a `MANIFEST.MF` file nested in the `META-INF` folder (most of the `jar-s` have this manifest file)

```
META-INF/
  MANIFEST.MF
com/
  app/
    ClassOne.class
    ClassTwo.class
    ...
```

## Packaging from command line

- a way to create JAR files is to use the JDK tool called `jar`

```
jar cvf Hello.jar .
```

- paremeters:
  - `c` create
  - `v` verbose
  - `f` indicates we are going to provide a filename for the jar
  - the last parameter is the directory where the `jar` tool should find the classes to package into JAR file (if we execute in the output directory where the compiler has put the classes we can use the current directory `.`)

- if we do not provide a manifest, than one is generated by the `jar` tool with 2 basic entries
```
META-INF/
  MANIFEST.MF
    Manifest-Version: 1.0
    Created-By: 14 (Oracle Corporation)
```

- in order to execute the JAR file use:
```bash
java -jar Hello.jar
```

- the previous command will return:
```
no main manifest attribute, in Hello.jar
```

- the solution would be to create a launchable JAR file
  - create a manifest that specify to JVM what the main class is 
```
HELLO-MANIFEST.MF
  Main-Class: Hello

```
NOTE: it loks like an empty line is required at the end of HELLO-MANIFEST.MF

- use the following `jar` command to include the key-value pairs from the **HELLO-MANIFEST.MF** into the actual **MANIFEST.MF**:
```bash
jar cvmf HELLO-MANIFEST.MF Hello.jar Hello.class
```

- after running the previous command the manifest included in the JAR file contains the following entries:
```
META-INF/
  MANIFEST.MF
    Manifest-Version: 1.0
    Main-Class: Hello
    Created-By: 14 (Oracle Corporation)
```

- when executing the JAR file everything works correctly:
```bash
java -jar Hello.jar
# Outputs: Hello from Java!
```

## Packaging from IntelliJ

With your project opened in IntelliJ do the following steps:
- **File -> Project Structure...**
- **Project Settings -> Artifacts**
- **Add -> JAR -> From modules with dependencies...**
- select the **Module** and **Main Class**
- hit **OK**
- select **Include in project build**


## Conclusion

Packaging JAR files is not a manual activity. Instead is part of a larger automated build process where a build tool orchestrates the steps.

Build process steps:
- build
- test
- analyse
- package

There are two pretty widely used Java build tools:
- Maven
- Gradle
